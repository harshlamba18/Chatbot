(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74647,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),r=e.i(71645);function n(){let[e,n]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,i]=(0,r.useState)(""),[d,l]=(0,r.useState)(""),[c,h]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[m,g]=(0,r.useState)(!1),[x,y]=(0,r.useState)("chat"),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null==(e=f.current)||e.scrollIntoView({behavior:"smooth"})},[c]),(0,r.useEffect)(()=>{a&&fetch("https://chatbot-nv5b.onrender.com/history",{headers:{Authorization:"Bearer ".concat(a)}}).then(e=>e.json()).then(e=>{e.messages&&p(e.messages)})},[a]);let b=async()=>{let t=await fetch("https://chatbot-nv5b.onrender.com/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:o})}),r=await t.json();alert(r.message||r.error)},j=async()=>{let t=await fetch("https://chatbot-nv5b.onrender.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:o})}),r=await t.json();r.token?(i(r.token),g(!0),h([{role:"assistant",content:"Hello ".concat(e,"! How can I help you??")}])):alert(r.error)},v=async()=>{if(!d)return;h([...c,{role:"user",content:d}]),l("");let e=await fetch("https://chatbot-nv5b.onrender.com/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({message:d})}),t=await e.json();t.reply?h(e=>[...e,{role:"assistant",content:t.reply}]):alert("Error contacting server")};return m?(0,t.jsxs)("div",{style:{maxWidth:"700px",margin:"2rem auto",padding:"1rem",border:"1px solid #ccc",borderRadius:"8px"},children:[(0,t.jsx)("h2",{style:{textAlign:"center"},children:"Student Counseling Chatbot"}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem",gap:"1rem"},children:[(0,t.jsx)("button",{style:{padding:"0.5rem 1rem",borderRadius:"8px",backgroundColor:"chat"===x?"#007bff":"#ccc",color:"#fff"},onClick:()=>y("chat"),children:"Chat"}),(0,t.jsx)("button",{style:{padding:"0.5rem 1rem",borderRadius:"8px",backgroundColor:"history"===x?"#007bff":"#ccc",color:"#fff"},onClick:()=>y("history"),children:"History"})]}),"chat"===x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1rem",height:"400px",overflowY:"auto",marginBottom:"1rem",backgroundColor:"#f9f9f9"},children:[c.map((e,r)=>(0,t.jsx)("div",{style:{display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start",marginBottom:"0.5rem"},children:(0,t.jsx)("div",{style:{backgroundColor:"user"===e.role?"#DCF8C6":"#E5E5EA",padding:"0.5rem 1rem",borderRadius:"15px",maxWidth:"70%"},children:e.content})},r)),(0,t.jsx)("div",{ref:f})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,t.jsx)("input",{value:d,onChange:e=>l(e.target.value),placeholder:"Type your message...",style:{flex:1,padding:"0.5rem",borderRadius:"8px",border:"1px solid #ccc"},onKeyDown:e=>"Enter"===e.key&&v()}),(0,t.jsx)("button",{onClick:v,style:{padding:"0.5rem 1rem",borderRadius:"8px"},children:"Send"})]})]}),"history"===x&&(0,t.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1rem",height:"400px",overflowY:"auto",backgroundColor:"#f0f0f0"},children:[0===u.length&&(0,t.jsx)("p",{children:"No previous chats found."}),u.map((e,r)=>(0,t.jsxs)("div",{style:{marginBottom:"0.5rem"},children:[(0,t.jsxs)("b",{children:["user"===e.role?"You":"Bot",":"]})," ",e.content]},r))]})]}):(0,t.jsxs)("div",{style:{maxWidth:"400px",margin:"2rem auto",textAlign:"center"},children:[(0,t.jsx)("h2",{children:"Student Login / Signup"}),(0,t.jsx)("input",{placeholder:"Username",value:e,onChange:e=>n(e.target.value),style:{width:"100%",padding:"0.5rem",margin:"0.5rem 0"}}),(0,t.jsx)("input",{type:"password",placeholder:"Password",value:o,onChange:e=>s(e.target.value),style:{width:"100%",padding:"0.5rem",margin:"0.5rem 0"}}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[(0,t.jsx)("button",{onClick:b,style:{flex:1,padding:"0.5rem"},children:"Signup"}),(0,t.jsx)("button",{onClick:j,style:{flex:1,padding:"0.5rem"},children:"Login"})]})]})}}]);